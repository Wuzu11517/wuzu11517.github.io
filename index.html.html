<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>d2af32d942cd4c47ad4565d86f2e639c</title>
  <style>
    html {
      line-height: 1.5;
      font-family: Georgia, serif;
      font-size: 20px;
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 1em;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, 'Lucida Console', Consolas, monospace;
      font-size: 85%;
      margin: 0;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<section id="1-header" class="cell markdown" id="HLjNRLTFb1h_">
<h2>1. HEADER</h2>
<p>Analysis of the effects of Natural Disasters on CPI, Deaths, and
More</p>
<p>Fall 2024 Data Science Project</p>
<p>Marvin Xu, Evan Liu, Arya Palan, Wesley Hang</p>
<p></br></p>
<p>Contributions:</p>
<p>A: Project idea (ALL)</p>
<p>B: Dataset Curation and Preprocessing (ALL)</p>
<p>C: Data Exploration and Summary Statistics (ALL)</p>
<p>D: ML Algorithm Design/Development (ALL)</p>
<p>E: ML Algorithm Training and Test Data Analysis (KNN - Wesley, Marvin
Linear Regression - Arya, Evan)</p>
<p>F: Visualization, Result Analysis, Conclusion (ALL)</p>
<p>G: Final Tutorial Report Creation (ALL)</p>
<p>H: Additional (not listed above)</p>
</section>
<section id="2-introduction" class="cell markdown" id="jY9_AiwXbOPT">
<h2>2. INTRODUCTION</h2>
<p>Throughout history, humanity has always faced natural disasters. Due
to their unpredictable and devastating nature, these forces have and
continued to cause extensive loss of life, property, and livelihoods. In
the past century, we have witnessed an increase in the frequency and
magnitude of natural disasters, accelerated by climate change,
urbanization, and population growth. From earthquakes and tornados to
floods and wildfires, the consequences of these disasters have direct
and indirect impacts that negatively affect people from across the
globe.</p>
<p>This goal of analysis focuses on the ALL NATURAL DISASTERS 1900-2021
dataset to investigate patterns and broader implications of natural
disasters, while also taking you through the data science life cycle.
Specifically, it attempts to address the following key questions:</p>
<p>What trends can be observed in the frequency and intensity of natural
disasters over time?</p>
<p>How are casualties and economic damages related to disaster types and
region characteristics?</p>
<p>What factors contribute to the disproportionate impacts of natural
disasters in certain areas or populations? Answering these questions is
essential for several reasons:</p>
<p>Public Safety and Preparedness: By understanding historical patterns,
policymakers and disaster management agencies can prioritize resources,
improve early warning systems, and enhance community preparedness.
Economic Resilience: Quantifying the economic impact of disasters
informs strategies for infrastructure development and insurance
frameworks to mitigate future risks. Equity in Response: Identifying
vulnerable populations ensures equitable allocation of aid and long-term
recovery planning. Environmental Insights: Correlating disaster trends
with environmental factors like climate change underscores the urgency
of sustainable practices and global collaboration. This exploration not
only sheds light on past disasters but also aims to provide actionable
insights for mitigating future risks, fostering resilience, and
protecting vulnerable communities. Through a data-driven approach, we
can transform historical tragedy into a foundation for strategic
decision-making and global resilience against natural disasters. How can
we use past natural disaster patterns to assess future trends to predict
effects of future natural disasters and see what what precautions are
most impactful in reducing damages.</p>
<p>Natural disasters affect millions of people every year, and could
continue to be a growing problem. It is important to assess and
understand them to hopefully reduce damages and deaths in the future. We
can also use trend analysis to look into how rising global temperatures
affect natural disasters.</p>
</section>
<section id="3-data-collection-and-selection" class="cell markdown"
id="LX7oJ-qc1sfY">
<h2>3. Data Collection and Selection</h2>
<p>We focus on selecting a dataset that is both reliable and relevant to
our project. For this project, we aim to analyze patterns, trends, and
impacts of natural disasters worldwide to understand their frequency,
severity, and associated factors. After researching multiple sources, we
found the ALL NATURAL DISASTERS 1900-2021 dataset on Kaggle, which meets
these criteria. The dataset originates from a legitimate source, the
Emergency Events Database (EM-DAT), ensuring its credibility.</p>
<p><a
href="https://www.kaggle.com/datasets/brsdincer/all-natural-disasters-19002021-eosdis"
class="uri">https://www.kaggle.com/datasets/brsdincer/all-natural-disasters-19002021-eosdis</a></p>
<h3 id="why-1970-2021-data">Why 1970-2021 Data?</h3>
<p>The Kaggle repository contains two datasets:</p>
<p>1900-2021: A broader dataset covering over a century of data.</p>
<p>1970-2021: A subset focusing on the last 50 years.</p>
<p>We decided to work with the 1970-2021 dataset for the following
reasons:</p>
<ol>
<li><p>Data Quality: Modern data collection methods have significantly
improved post-1970, making the dataset more consistent and
reliable.</p></li>
<li><p>Relevance: The last 50 years provide a focused window to study
recent trends, which are more aligned with contemporary climate concerns
and disaster response.</p></li>
<li><p>Manageability: The 1900-2021 dataset, while comprehensive,
contains older data that may not reflect modern recording standards and
increases the computational overhead.</p></li>
</ol>
<h3 id="technology-stack">Technology Stack</h3>
<p>We are using Python, Jupitier notebook, and Google Colab.</p>
<p>Some Key Python Libraries: Pandas: For data manipulation and
cleaning. NumPy: For numerical computations. Matplotlib and Seaborn: For
creating insightful visualizations. Scikit-learn: For machine learning
tasks such as classification, regression, and clustering. Statsmodels:
For hypothesis testing and statistical modeling. Plotly: For interactive
data visualizations.</p>
</section>
<section id="imports-and-data-curation" class="cell markdown"
id="VZ6dtDvf8ibZ">
<h2>Imports and Data Curation</h2>
</section>
<div class="cell code" data-execution_count="1"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}"
id="KGjDQ8aJ8OxA" data-outputId="ab0be492-b21d-4343-c4f9-fea874811aa8">
<div class="sourceCode" id="cb1"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy <span class="im">import</span> stats</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.model_selection <span class="im">import</span> train_test_split</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.neighbors <span class="im">import</span> KNeighborsRegressor</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.preprocessing <span class="im">import</span> LabelEncoder, Normalizer</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> mean_squared_error</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>file_path <span class="op">=</span> <span class="st">&quot;1970-2021_DISASTERS.csv&quot;</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> pd.read_csv(file_path)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>data.info()</span></code></pre></div>
<div class="output stream stdout">
<pre><code>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 14644 entries, 0 to 14643
Data columns (total 47 columns):
 #   Column                           Non-Null Count  Dtype  
---  ------                           --------------  -----  
 0   Dis No                           14644 non-null  object 
 1   Year                             14644 non-null  int64  
 2   Seq                              14644 non-null  int64  
 3   Glide                            1581 non-null   object 
 4   Disaster Group                   14644 non-null  object 
 5   Disaster Subgroup                14644 non-null  object 
 6   Disaster Type                    14644 non-null  object 
 7   Disaster Subtype                 11897 non-null  object 
 8   Disaster Subsubtype              1044 non-null   object 
 9   Event Name                       3645 non-null   object 
 10  Country                          14644 non-null  object 
 11  ISO                              14644 non-null  object 
 12  Region                           14644 non-null  object 
 13  Continent                        14644 non-null  object 
 14  Location                         13298 non-null  object 
 15  Origin                           3780 non-null   object 
 16  Associated Dis                   3232 non-null   object 
 17  Associated Dis2                  698 non-null    object 
 18  OFDA Response                    1450 non-null   object 
 19  Appeal                           2440 non-null   object 
 20  Declaration                      3127 non-null   object 
 21  Aid Contribution                 677 non-null    float64
 22  Dis Mag Value                    4569 non-null   float64
 23  Dis Mag Scale                    13571 non-null  object 
 24  Latitude                         2331 non-null   object 
 25  Longitude                        2335 non-null   object 
 26  Local Time                       765 non-null    object 
 27  River Basin                      1285 non-null   object 
 28  Start Year                       14644 non-null  int64  
 29  Start Month                      14376 non-null  float64
 30  Start Day                        11577 non-null  float64
 31  End Year                         14644 non-null  int64  
 32  End Month                        14095 non-null  float64
 33  End Day                          11650 non-null  float64
 34  Total Deaths                     10199 non-null  float64
 35  No Injured                       3651 non-null   float64
 36  No Affected                      8846 non-null   float64
 37  No Homeless                      2249 non-null   float64
 38  Total Affected                   11041 non-null  float64
 39  Reconstruction Costs (&#39;000 US$)  31 non-null     float64
 40  Insured Damages (&#39;000 US$)       1094 non-null   float64
 41  Total Damages (&#39;000 US$)         4863 non-null   float64
 42  CPI                              14329 non-null  float64
 43  Adm Level                        7855 non-null   object 
 44  Admin1 Code                      4581 non-null   object 
 45  Admin2 Code                      3965 non-null   object 
 46  Geo Locations                    7855 non-null   object 
dtypes: float64(15), int64(4), object(28)
memory usage: 5.3+ MB
</code></pre>
</div>
</div>
<div class="cell markdown" id="lcLhfAUE8kks">
<h2 id="4-data-preprocessing-and-cleaning">4. Data Preprocessing and
Cleaning</h2>
<p>Before diving into exploratory data analysis, it's essential to
preprocess the data to ensure its integrity and usability. The first
step involves loading the dataset into a Pandas DataFrame for analysis
and inspecting its structure, including data types and missing values.
This helps us understand the dataset's initial state and identify any
immediate issues requiring attention.</p>
<p><br></p>
<p>We will perform some basic preliminary data cleaning and
transformation steps:</p>
<h3 id="removing-irrelevant-and-redundant-columns">Removing Irrelevant
and Redundant Columns</h3>
<ol>
<li><p>Upon inspection, we noticed that the Disaster Group column
contains the same value, "natural," for all rows. Since it doesn't
provide any additional information or variability, we can safely drop
this column to reduce redundancy in the dataset.</p></li>
<li><p>Remove Dis No: This column is a composite identifier combining
year, ID, and region information, all of which are already present in
other columns. Retaining it would add no new value to the
analysis.</p></li>
<li><p>Remove Admin1 Code and Admin2 Code: These columns represent
administrative region codes that are not necessary for our global
analysis of natural disasters. Removing these will simplify the dataset
without impacting the insights.</p></li>
<li><p>Glide: This column contains unique identifiers for disaster
records but does not contribute to meaningful analysis in our context.
Since it serves only as metadata and is not required for our study, it
will be dropped.</p></li>
</ol>
<h3 id="converting-data-types">Converting Data Types</h3>
<ol>
<li><p>Separate columns for Start Year, Start Month, Start Day, End
Year, End Month, and End Day will be combined into two new columns:
Start Date and End Date.</p></li>
<li><p>OFDA Response: This column will be converted into a boolean (True
for "Yes" and False for "No") to enable easier querying and
analysis.</p></li>
<li><p>Longitude and Latitude: These columns, currently stored as
strings, will be converted to numerical data types to facilitate
geographic and spatial analysis.</p></li>
<li><p>Upon inspection of the original data types, most of the
categorical data types are type object, we will convert them to string
for better representation and processing later.</p></li>
</ol>
<h2 id="adding-new-columns">Adding New Columns</h2>
<p>This dataset features total deaths, no. injured, no.affected no.
homeless, and total affected. After looking at the specific values, the
total affected included no. injured, no. homeless, and no. affected we
concluded that:</p>
<p><br> No affected was sepeate from no. injured and didn't include no.
injured. This likely means it represents those who had experienced and
related consequence of the disaster, not just physical harm to their
health.</p>
<p><br></p>
<p>Total affected included no. homeless, no. affected, and no. injured,
further implying that these categories were exclusive of each other. To
better seperate the damage we created some columns to better represent
the direct physical harms to human health.</p>
<ol>
<li><p>Total Casualties: A new column, Total Casualties, will be created
by summing Total Deaths and No Injured. This column better reflects the
overall direct physical harm caused by each disaster.</p></li>
<li><p>Deaths per 10,000 Casualties: This will be added by comparing the
deaths to total casualities. This will provide a clearer picture of the
relative severity of each disaster.</p></li>
</ol>
<h3 id="handling-missing-data">Handling Missing Data:</h3>
<p>For now we didn't want to drop too columns or examples with missing
data before our exploratory analysis, and the data science life cycle
often requires us to go back to previous steps to refine our data as we
gain more insights and direction for our analysis.</p>
<p>Here we just looked at the missing data values and took a more
reserved approach for missing data.</p>
<ol>
<li>Filled the OFDA responses with No/False for missing values, since it
only contained Null and Yes values. Safe assumption that the Nulls just
represent No.</li>
</ol>
</div>
<div class="cell code" data-execution_count="2"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}"
id="nvLTGwJz9slN" data-outputId="0f161dae-d13b-48a9-b5f6-066b00dee240">
<div class="sourceCode" id="cb3"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert object columns to string dtype</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>object_cols <span class="op">=</span> data.select_dtypes(include<span class="op">=</span><span class="st">&#39;object&#39;</span>).columns</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>data[object_cols] <span class="op">=</span> data[object_cols].astype(<span class="st">&#39;string&#39;</span>)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Drop redundant and irrelevant columns</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>columns_to_drop <span class="op">=</span> [<span class="st">&#39;Disaster Group&#39;</span>, <span class="st">&#39;Dis No&#39;</span>, <span class="st">&#39;Admin1 Code&#39;</span>, <span class="st">&#39;Admin2 Code&#39;</span>, <span class="st">&#39;Glide&#39;</span>]</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> data.drop(columns<span class="op">=</span>columns_to_drop)</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;Redundant and irrelevant columns have been dropped.&quot;</span>)</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine start and end date components into datetime columns</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>data[<span class="st">&#39;Start Date&#39;</span>] <span class="op">=</span> pd.to_datetime(</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>    data[[<span class="st">&#39;Start Year&#39;</span>, <span class="st">&#39;Start Month&#39;</span>, <span class="st">&#39;Start Day&#39;</span>]].rename(</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>        columns<span class="op">=</span>{<span class="st">&#39;Start Year&#39;</span>: <span class="st">&#39;year&#39;</span>, <span class="st">&#39;Start Month&#39;</span>: <span class="st">&#39;month&#39;</span>, <span class="st">&#39;Start Day&#39;</span>: <span class="st">&#39;day&#39;</span>}</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>    ), errors<span class="op">=</span><span class="st">&#39;coerce&#39;</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>data[<span class="st">&#39;End Date&#39;</span>] <span class="op">=</span> pd.to_datetime(</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>    data[[<span class="st">&#39;End Year&#39;</span>, <span class="st">&#39;End Month&#39;</span>, <span class="st">&#39;End Day&#39;</span>]].rename(</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>        columns<span class="op">=</span>{<span class="st">&#39;End Year&#39;</span>: <span class="st">&#39;year&#39;</span>, <span class="st">&#39;End Month&#39;</span>: <span class="st">&#39;month&#39;</span>, <span class="st">&#39;End Day&#39;</span>: <span class="st">&#39;day&#39;</span>}</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>    ), errors<span class="op">=</span><span class="st">&#39;coerce&#39;</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Drop original date component columns</span></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> data.drop(columns<span class="op">=</span>[<span class="st">&#39;Start Year&#39;</span>, <span class="st">&#39;Start Month&#39;</span>, <span class="st">&#39;Start Day&#39;</span>, <span class="st">&#39;End Year&#39;</span>, <span class="st">&#39;End Month&#39;</span>, <span class="st">&#39;End Day&#39;</span>])</span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;Date components have been combined into &#39;Start Date&#39; and &#39;End Date&#39; columns.&quot;</span>)</span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert &#39;OFDA Response&#39; to boolean and fill empty values with &#39;No&#39;</span></span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>data[<span class="st">&#39;OFDA Response&#39;</span>] <span class="op">=</span> data[<span class="st">&#39;OFDA Response&#39;</span>].<span class="bu">str</span>.strip().<span class="bu">str</span>.lower().<span class="bu">map</span>({<span class="st">&#39;yes&#39;</span>: <span class="va">True</span>, <span class="st">&#39;no&#39;</span>: <span class="va">False</span>}).fillna(<span class="va">False</span>)</span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;&#39;OFDA Response&#39; column has been converted to boolean with empty values filled as &#39;No&#39;.&quot;</span>)</span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert &#39;Longitude&#39; and &#39;Latitude&#39; to numeric</span></span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>data[<span class="st">&#39;Longitude&#39;</span>] <span class="op">=</span> pd.to_numeric(data[<span class="st">&#39;Longitude&#39;</span>], errors<span class="op">=</span><span class="st">&#39;coerce&#39;</span>)</span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a>data[<span class="st">&#39;Latitude&#39;</span>] <span class="op">=</span> pd.to_numeric(data[<span class="st">&#39;Latitude&#39;</span>], errors<span class="op">=</span><span class="st">&#39;coerce&#39;</span>)</span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;&#39;Longitude&#39; and &#39;Latitude&#39; columns have been converted to numeric.&quot;</span>)</span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Add &#39;Total Casualties&#39; column</span></span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a>data[<span class="st">&#39;Total Casualties&#39;</span>] <span class="op">=</span> data[[<span class="st">&#39;Total Deaths&#39;</span>, <span class="st">&#39;No Injured&#39;</span>]].fillna(<span class="dv">0</span>).<span class="bu">sum</span>(axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;&#39;Total Casualties&#39; column has been added by summing &#39;Total Deaths&#39; and &#39;No Injured&#39;.&quot;</span>)</span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a><span class="co"># Add &#39;Deaths per 10,000 Casualties&#39; column</span></span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a>data[<span class="st">&#39;Deaths per 10,000 Casualties&#39;</span>] <span class="op">=</span> (data[<span class="st">&#39;Total Deaths&#39;</span>] <span class="op">/</span> data[<span class="st">&#39;Total Casualties&#39;</span>].replace(<span class="dv">0</span>, pd.NA)) <span class="op">*</span> <span class="dv">10000</span></span>
<span id="cb3-40"><a href="#cb3-40" aria-hidden="true" tabindex="-1"></a>data[<span class="st">&#39;Deaths per 10,000 Casualties&#39;</span>] <span class="op">=</span> data[<span class="st">&#39;Deaths per 10,000 Casualties&#39;</span>].fillna(<span class="dv">0</span>)</span>
<span id="cb3-41"><a href="#cb3-41" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;&#39;Deaths per 10,000 Casualties&#39; column has been added to reflect the ratio of deaths relative to casualties.&quot;</span>)</span>
<span id="cb3-42"><a href="#cb3-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-43"><a href="#cb3-43" aria-hidden="true" tabindex="-1"></a><span class="co"># Verify the changes</span></span>
<span id="cb3-44"><a href="#cb3-44" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(data.info())</span></code></pre></div>
<div class="output stream stdout">
<pre><code>Redundant and irrelevant columns have been dropped.
Date components have been combined into &#39;Start Date&#39; and &#39;End Date&#39; columns.
&#39;OFDA Response&#39; column has been converted to boolean with empty values filled as &#39;No&#39;.
&#39;Longitude&#39; and &#39;Latitude&#39; columns have been converted to numeric.
&#39;Total Casualties&#39; column has been added by summing &#39;Total Deaths&#39; and &#39;No Injured&#39;.
&#39;Deaths per 10,000 Casualties&#39; column has been added to reflect the ratio of deaths relative to casualties.
&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 14644 entries, 0 to 14643
Data columns (total 40 columns):
 #   Column                           Non-Null Count  Dtype         
---  ------                           --------------  -----         
 0   Year                             14644 non-null  int64         
 1   Seq                              14644 non-null  int64         
 2   Disaster Subgroup                14644 non-null  string        
 3   Disaster Type                    14644 non-null  string        
 4   Disaster Subtype                 11897 non-null  string        
 5   Disaster Subsubtype              1044 non-null   string        
 6   Event Name                       3645 non-null   string        
 7   Country                          14644 non-null  string        
 8   ISO                              14644 non-null  string        
 9   Region                           14644 non-null  string        
 10  Continent                        14644 non-null  string        
 11  Location                         13298 non-null  string        
 12  Origin                           3780 non-null   string        
 13  Associated Dis                   3232 non-null   string        
 14  Associated Dis2                  698 non-null    string        
 15  OFDA Response                    14644 non-null  bool          
 16  Appeal                           2440 non-null   string        
 17  Declaration                      3127 non-null   string        
 18  Aid Contribution                 677 non-null    float64       
 19  Dis Mag Value                    4569 non-null   float64       
 20  Dis Mag Scale                    13571 non-null  string        
 21  Latitude                         2066 non-null   Float64       
 22  Longitude                        2070 non-null   Float64       
 23  Local Time                       765 non-null    string        
 24  River Basin                      1285 non-null   string        
 25  Total Deaths                     10199 non-null  float64       
 26  No Injured                       3651 non-null   float64       
 27  No Affected                      8846 non-null   float64       
 28  No Homeless                      2249 non-null   float64       
 29  Total Affected                   11041 non-null  float64       
 30  Reconstruction Costs (&#39;000 US$)  31 non-null     float64       
 31  Insured Damages (&#39;000 US$)       1094 non-null   float64       
 32  Total Damages (&#39;000 US$)         4863 non-null   float64       
 33  CPI                              14329 non-null  float64       
 34  Adm Level                        7855 non-null   string        
 35  Geo Locations                    7855 non-null   string        
 36  Start Date                       11575 non-null  datetime64[ns]
 37  End Date                         11645 non-null  datetime64[ns]
 38  Total Casualties                 14644 non-null  float64       
 39  Deaths per 10,000 Casualties     14644 non-null  float64       
dtypes: Float64(2), bool(1), datetime64[ns](2), float64(13), int64(2), string(20)
memory usage: 4.4 MB
None
</code></pre>
</div>
<div class="output stream stderr">
<pre><code>&lt;ipython-input-2-6f6801db6020&gt;:26: FutureWarning: Downcasting object dtype arrays on .fillna, .ffill, .bfill is deprecated and will change in a future version. Call result.infer_objects(copy=False) instead. To opt-in to the future behavior, set `pd.set_option(&#39;future.no_silent_downcasting&#39;, True)`
  data[&#39;OFDA Response&#39;] = data[&#39;OFDA Response&#39;].str.strip().str.lower().map({&#39;yes&#39;: True, &#39;no&#39;: False}).fillna(False)
&lt;ipython-input-2-6f6801db6020&gt;:40: FutureWarning: Downcasting object dtype arrays on .fillna, .ffill, .bfill is deprecated and will change in a future version. Call result.infer_objects(copy=False) instead. To opt-in to the future behavior, set `pd.set_option(&#39;future.no_silent_downcasting&#39;, True)`
  data[&#39;Deaths per 10,000 Casualties&#39;] = data[&#39;Deaths per 10,000 Casualties&#39;].fillna(0)
</code></pre>
</div>
</div>
<section id="5-exploratory-data-analysis--visualization"
class="cell markdown" id="2qX2IBASTTf6">
<h2>5. Exploratory Data Analysis &amp; Visualization</h2>
<p>Exploratory Data Analysis (EDA) is a critical step in the data
science workflow that allows us to uncover patterns, trends, and
relationships within the dataset. By summarizing the data through
descriptive statistics and visualizations, we can gain valuable insights
into the key drivers and characteristics of natural disasters. This step
helps us identify anomalies, validate assumptions, and refine hypotheses
for further analysis. Through a combination of plots, charts, and
metrics, we aim to build a comprehensive understanding of the data and
its underlying story.</p>
</section>
<section id="anova-test-marvin-xu" class="cell markdown"
id="5Z0P5tTeUnaj">
<h3>ANOVA Test (Marvin Xu)</h3>
<p>In this section, we aim to explore whether the ratio of deaths to
total casualties has significantly changed over time. Instead of
focusing on specific years, we analyze three distinct periods:
1970-1987, 1987-2004, and 2004-2021. By using an ANOVA (Analysis of
Variance) test, we can statistically determine if there are meaningful
differences in the average Deaths per 10,000 Casualties ratio across
these time periods. This analysis provides valuable insights into
long-term trends in disaster severity and response effectiveness,
helping us understand how outcomes have evolved over the decades.
<br></p>
<p>H0: There is no significant difference in the average ratio of deaths
to total casualties between at least 2 periods for the periods
1970-1987, 1987-2004, and 2004-2021.</p>
<p>HA: There is a significant difference in the average ratio of deaths
to total casualties between at least 2 periods for the periods
1970-1987, 1987-2004, and 2004-2021.</p>
</section>
<div class="cell code" data-execution_count="3"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:631}"
id="JAIL8bB9Urg_" data-outputId="6a19f852-27d4-4ca2-e177-19aae264e7a5">
<div class="sourceCode" id="cb6"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 1: Define the periods</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>bins <span class="op">=</span> [<span class="dv">1970</span>, <span class="dv">1987</span>, <span class="dv">2004</span>, <span class="dv">2021</span>]</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>labels <span class="op">=</span> [<span class="st">&#39;1970-1987&#39;</span>, <span class="st">&#39;1987-2004&#39;</span>, <span class="st">&#39;2004-2021&#39;</span>]</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 2: Assign each year to a period</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>data[<span class="st">&#39;Period&#39;</span>] <span class="op">=</span> pd.cut(data[<span class="st">&#39;Year&#39;</span>], bins<span class="op">=</span>bins, labels<span class="op">=</span>labels, right<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 3: Calculate average &#39;Deaths per 10,000 Casualties&#39; for each period</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>period_means <span class="op">=</span> data.groupby(<span class="st">&#39;Period&#39;</span>, observed<span class="op">=</span><span class="va">True</span>)[<span class="st">&#39;Deaths per 10,000 Casualties&#39;</span>].mean().reset_index()</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 4: Prepare data for ANOVA test</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>period_1 <span class="op">=</span> data[data[<span class="st">&#39;Period&#39;</span>] <span class="op">==</span> <span class="st">&#39;1970-1987&#39;</span>][<span class="st">&#39;Deaths per 10,000 Casualties&#39;</span>]</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>period_2 <span class="op">=</span> data[data[<span class="st">&#39;Period&#39;</span>] <span class="op">==</span> <span class="st">&#39;1987-2004&#39;</span>][<span class="st">&#39;Deaths per 10,000 Casualties&#39;</span>]</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>period_3 <span class="op">=</span> data[data[<span class="st">&#39;Period&#39;</span>] <span class="op">==</span> <span class="st">&#39;2004-2021&#39;</span>][<span class="st">&#39;Deaths per 10,000 Casualties&#39;</span>]</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 5: Perform ANOVA test</span></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>anova_result <span class="op">=</span> stats.f_oneway(period_1, period_2, period_3)</span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 6: Create a bar plot for the averages</span></span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">6</span>))</span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>sns.barplot(x<span class="op">=</span><span class="st">&#39;Period&#39;</span>, y<span class="op">=</span><span class="st">&#39;Deaths per 10,000 Casualties&#39;</span>, data<span class="op">=</span>period_means)</span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&#39;Average Deaths per 10,000 Casualties by Period&#39;</span>)</span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&#39;Deaths per 10,000 Casualties (Average)&#39;</span>)</span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&#39;Period&#39;</span>)</span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>plt.xticks(rotation<span class="op">=</span><span class="dv">45</span>)</span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the ANOVA test result and the plot</span></span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&#39;ANOVA PValue Result:&#39;</span>, anova_result.pvalue)</span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="output stream stdout">
<pre><code>ANOVA PValue Result: 3.328575804789713e-06
</code></pre>
</div>
<div class="output display_data">
<p><img
src="vertopal_7478f51bb5654ca1890dd3e1edaa5c94/e54bbe2ca4eb77c62ba9dc07a8bfa76d634a8847.png" /></p>
</div>
</div>
<div class="cell markdown" id="0YrzY-VIe1mK">
<p>ANOVA Results and Analysis:</p>
<p>Using a threshhold value of 0.05. Our p value is lower than this,
which indicates that we have strong enough evidence to reject the Null
Hypothesis.</p>
<p>This means that there is a significant difference in the average
ratio of deaths to total casualties between at least 2 periods for the
periods 1970-1987, 1987-2004, and 2004-2021.</p>
<p>This result could suggest that disaster severity (measured by deaths
relative to casualties) has changed significantly over time.</p>
<p><br></p>
<p>Now we can perform post-hoc tests to further identify which periods
differ significantly if needed later on.</p>
</div>
<div class="cell markdown" id="30AeEmZELT21">
<p>###CHI SQUARED TEST (Wesley Hang)</p>
</div>
<div class="cell markdown" id="wKuGl_dDPG0g">
<p>Within this test we are utilizing a Chi Squared Test to gauge if a
specfic category of disaster affects the likelihood of 100+ casualities
post disaster. There are a few "main" disaster types that are also able
to be separated into subcategories as well. In order to properly carry
out this test it was necessary to separate it by each subcategory
instead of main category. In addition, it was also needed to turn the
"numbers of casualaties" into categorical data of whether the numbers
was under or over 100. After separating the data and creating new
columns I was able to properly carry out my test.</p>
<p>It is important to understand if there there are different magnitudes
of damage when it comes to the various disaster types. This not only
allows us to properly determine if there is a need to prioritize certain
disasters over others as well as which ones are easier to handle.</p>
<p>H0: The category of Natural Disaster Does Not Affect the likelihood
of 100+ total deaths</p>
<p>HA: The category of Natural Disaster Does Affect the likelihood of
100+ total deaths.</p>
</div>
<div class="cell code" data-execution_count="4"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:563}"
id="sSfddxcoZjDN" data-outputId="53bf23d2-cca2-46de-b598-c12ef80ea2d9">
<div class="sourceCode" id="cb8"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>data_cleaned <span class="op">=</span> data.copy()  <span class="co"># Create a deep copy of the df</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>data_cleaned <span class="op">=</span> data.dropna(subset<span class="op">=</span>[<span class="st">&#39;Total Deaths&#39;</span>]) <span class="co">#drops all entries where the &quot;total deaths&quot; is NaN as we cannot use those rows</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>data_cleaned.loc[:, <span class="st">&#39;Over 100 Deaths&#39;</span>] <span class="op">=</span> data_cleaned[<span class="st">&#39;Total Deaths&#39;</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: <span class="st">&#39;Yes&#39;</span> <span class="cf">if</span> x <span class="op">&gt;</span> <span class="dv">100</span> <span class="cf">else</span> <span class="st">&#39;No&#39;</span>)</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a contingency table</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>contingency_table <span class="op">=</span> pd.crosstab(data_cleaned[<span class="st">&#39;Disaster Type&#39;</span>], data_cleaned[<span class="st">&#39;Over 100 Deaths&#39;</span>],  margins<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>contingency_table</span></code></pre></div>
<div class="output stream stderr">
<pre><code>&lt;ipython-input-4-6932adeb3b17&gt;:5: SettingWithCopyWarning: 
A value is trying to be set on a copy of a slice from a DataFrame.
Try using .loc[row_indexer,col_indexer] = value instead

See the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy
  data_cleaned.loc[:, &#39;Over 100 Deaths&#39;] = data_cleaned[&#39;Total Deaths&#39;].apply(lambda x: &#39;Yes&#39; if x &gt; 100 else &#39;No&#39;)
</code></pre>
</div>
<div class="output execute_result" data-execution_count="4">

  <div id="df-68b1e632-0d31-48fe-b69f-ef62d3886e54" class="colab-df-container">
    <div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>Over 100 Deaths</th>
      <th>No</th>
      <th>Yes</th>
    </tr>
    <tr>
      <th>Disaster Type</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Animal accident</th>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <th>Drought</th>
      <td>30</td>
      <td>23</td>
    </tr>
    <tr>
      <th>Earthquake</th>
      <td>628</td>
      <td>153</td>
    </tr>
    <tr>
      <th>Epidemic</th>
      <td>843</td>
      <td>374</td>
    </tr>
    <tr>
      <th>Extreme temperature</th>
      <td>339</td>
      <td>133</td>
    </tr>
    <tr>
      <th>Flood</th>
      <td>3370</td>
      <td>440</td>
    </tr>
    <tr>
      <th>Glacial lake outburst</th>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>Landslide</th>
      <td>603</td>
      <td>75</td>
    </tr>
    <tr>
      <th>Mass movement (dry)</th>
      <td>34</td>
      <td>5</td>
    </tr>
    <tr>
      <th>Storm</th>
      <td>2619</td>
      <td>283</td>
    </tr>
    <tr>
      <th>Volcanic activity</th>
      <td>46</td>
      <td>10</td>
    </tr>
    <tr>
      <th>Wildfire</th>
      <td>185</td>
      <td>3</td>
    </tr>
  </tbody>
</table>
</div>
    <div class="colab-df-buttons">

  <div class="colab-df-container">
    <button class="colab-df-convert" onclick="convertToInteractive('df-68b1e632-0d31-48fe-b69f-ef62d3886e54')"
            title="Convert this dataframe to an interactive table."
            style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960">
    <path d="M120-120v-720h720v720H120Zm60-500h600v-160H180v160Zm220 220h160v-160H400v160Zm0 220h160v-160H400v160ZM180-400h160v-160H180v160Zm440 0h160v-160H620v160ZM180-180h160v-160H180v160Zm440 0h160v-160H620v160Z"/>
  </svg>
    </button>

  <style>
    .colab-df-container {
      display:flex;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    .colab-df-buttons div {
      margin-bottom: 4px;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

    <script>
      const buttonEl =
        document.querySelector('#df-68b1e632-0d31-48fe-b69f-ef62d3886e54 button.colab-df-convert');
      buttonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';

      async function convertToInteractive(key) {
        const element = document.querySelector('#df-68b1e632-0d31-48fe-b69f-ef62d3886e54');
        const dataTable =
          await google.colab.kernel.invokeFunction('convertToInteractive',
                                                    [key], {});
        if (!dataTable) return;

        const docLinkHtml = 'Like what you see? Visit the ' +
          '<a target="_blank" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'
          + ' to learn more about interactive tables.';
        element.innerHTML = '';
        dataTable['output_type'] = 'display_data';
        await google.colab.output.renderOutput(dataTable, element);
        const docLink = document.createElement('div');
        docLink.innerHTML = docLinkHtml;
        element.appendChild(docLink);
      }
    </script>
  </div>


<div id="df-53cf0bf0-2220-437b-96f6-2342d13973c6">
  <button class="colab-df-quickchart" onclick="quickchart('df-53cf0bf0-2220-437b-96f6-2342d13973c6')"
            title="Suggest charts"
            style="display:none;">

<svg xmlns="http://www.w3.org/2000/svg" height="24px"viewBox="0 0 24 24"
     width="24px">
    <g>
        <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/>
    </g>
</svg>
  </button>

<style>
  .colab-df-quickchart {
      --bg-color: #E8F0FE;
      --fill-color: #1967D2;
      --hover-bg-color: #E2EBFA;
      --hover-fill-color: #174EA6;
      --disabled-fill-color: #AAA;
      --disabled-bg-color: #DDD;
  }

  [theme=dark] .colab-df-quickchart {
      --bg-color: #3B4455;
      --fill-color: #D2E3FC;
      --hover-bg-color: #434B5C;
      --hover-fill-color: #FFFFFF;
      --disabled-bg-color: #3B4455;
      --disabled-fill-color: #666;
  }

  .colab-df-quickchart {
    background-color: var(--bg-color);
    border: none;
    border-radius: 50%;
    cursor: pointer;
    display: none;
    fill: var(--fill-color);
    height: 32px;
    padding: 0;
    width: 32px;
  }

  .colab-df-quickchart:hover {
    background-color: var(--hover-bg-color);
    box-shadow: 0 1px 2px rgba(60, 64, 67, 0.3), 0 1px 3px 1px rgba(60, 64, 67, 0.15);
    fill: var(--button-hover-fill-color);
  }

  .colab-df-quickchart-complete:disabled,
  .colab-df-quickchart-complete:disabled:hover {
    background-color: var(--disabled-bg-color);
    fill: var(--disabled-fill-color);
    box-shadow: none;
  }

  .colab-df-spinner {
    border: 2px solid var(--fill-color);
    border-color: transparent;
    border-bottom-color: var(--fill-color);
    animation:
      spin 1s steps(1) infinite;
  }

  @keyframes spin {
    0% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
      border-left-color: var(--fill-color);
    }
    20% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    30% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
      border-right-color: var(--fill-color);
    }
    40% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    60% {
      border-color: transparent;
      border-right-color: var(--fill-color);
    }
    80% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-bottom-color: var(--fill-color);
    }
    90% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
    }
  }
</style>

  <script>
    async function quickchart(key) {
      const quickchartButtonEl =
        document.querySelector('#' + key + ' button');
      quickchartButtonEl.disabled = true;  // To prevent multiple clicks.
      quickchartButtonEl.classList.add('colab-df-spinner');
      try {
        const charts = await google.colab.kernel.invokeFunction(
            'suggestCharts', [key], {});
      } catch (error) {
        console.error('Error during call to suggestCharts:', error);
      }
      quickchartButtonEl.classList.remove('colab-df-spinner');
      quickchartButtonEl.classList.add('colab-df-quickchart-complete');
    }
    (() => {
      let quickchartButtonEl =
        document.querySelector('#df-53cf0bf0-2220-437b-96f6-2342d13973c6 button');
      quickchartButtonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';
    })();
  </script>
</div>

  <div id="id_ad345aab-0191-4cd4-992a-e80eab8664ff">
    <style>
      .colab-df-generate {
        background-color: #E8F0FE;
        border: none;
        border-radius: 50%;
        cursor: pointer;
        display: none;
        fill: #1967D2;
        height: 32px;
        padding: 0 0 0 0;
        width: 32px;
      }

      .colab-df-generate:hover {
        background-color: #E2EBFA;
        box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
        fill: #174EA6;
      }

      [theme=dark] .colab-df-generate {
        background-color: #3B4455;
        fill: #D2E3FC;
      }

      [theme=dark] .colab-df-generate:hover {
        background-color: #434B5C;
        box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
        filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
        fill: #FFFFFF;
      }
    </style>
    <button class="colab-df-generate" onclick="generateWithVariable('contingency_table')"
            title="Generate code using this dataframe."
            style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px"viewBox="0 0 24 24"
       width="24px">
    <path d="M7,19H8.4L18.45,9,17,7.55,7,17.6ZM5,21V16.75L18.45,3.32a2,2,0,0,1,2.83,0l1.4,1.43a1.91,1.91,0,0,1,.58,1.4,1.91,1.91,0,0,1-.58,1.4L9.25,21ZM18.45,9,17,7.55Zm-12,3A5.31,5.31,0,0,0,4.9,8.1,5.31,5.31,0,0,0,1,6.5,5.31,5.31,0,0,0,4.9,4.9,5.31,5.31,0,0,0,6.5,1,5.31,5.31,0,0,0,8.1,4.9,5.31,5.31,0,0,0,12,6.5,5.46,5.46,0,0,0,6.5,12Z"/>
  </svg>
    </button>
    <script>
      (() => {
      const buttonEl =
        document.querySelector('#id_ad345aab-0191-4cd4-992a-e80eab8664ff button.colab-df-generate');
      buttonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';

      buttonEl.onclick = () => {
        google.colab.notebook.generateWithVariable('contingency_table');
      }
      })();
    </script>
  </div>

    </div>
  </div>

</div>
</div>
<div class="cell markdown" id="TwwX0aC4aQD4">
<p>After we create our contingency table we will plot it to create a
visualization of the comparisons between the disaster type and if the
casualty number is above 100</p>
</div>
<div class="cell code" data-execution_count="5"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:714}"
id="0YV2tw96aIvH" data-outputId="9076464c-3d7d-4485-a922-156949c07bad">
<div class="sourceCode" id="cb10"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Map &#39;Yes&#39; to 1 and &#39;No&#39; to 0 in the &#39;Over 100 Deaths&#39; column</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>data_cleaned[<span class="st">&#39;Over 100 Deaths&#39;</span>] <span class="op">=</span> data_cleaned[<span class="st">&#39;Over 100 Deaths&#39;</span>].<span class="bu">map</span>({<span class="st">&#39;Yes&#39;</span>: <span class="dv">1</span>, <span class="st">&#39;No&#39;</span>: <span class="dv">0</span>})</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Group by &#39;Disaster Type&#39; and sum the counts of disasters where deaths were over 100</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>death_counts <span class="op">=</span> data_cleaned.groupby(<span class="st">&#39;Disaster Type&#39;</span>)[<span class="st">&#39;Over 100 Deaths&#39;</span>].<span class="bu">sum</span>().reset_index()</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a bar plot</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>plt.bar(death_counts[<span class="st">&#39;Disaster Type&#39;</span>], death_counts[<span class="st">&#39;Over 100 Deaths&#39;</span>])</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&#39;Disasters with Over 100 Deaths by Type&#39;</span>)</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&#39;Disaster Type&#39;</span>)</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&#39;Count of Disasters with Over 100 Deaths&#39;</span>)</span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>plt.xticks(rotation<span class="op">=</span><span class="dv">45</span>, ha<span class="op">=</span><span class="st">&#39;right&#39;</span>)  <span class="co"># Adjust x-axis labels for readability</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Show the plot</span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="output stream stderr">
<pre><code>&lt;ipython-input-5-5f67607b285a&gt;:2: SettingWithCopyWarning: 
A value is trying to be set on a copy of a slice from a DataFrame.
Try using .loc[row_indexer,col_indexer] = value instead

See the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy
  data_cleaned[&#39;Over 100 Deaths&#39;] = data_cleaned[&#39;Over 100 Deaths&#39;].map({&#39;Yes&#39;: 1, &#39;No&#39;: 0})
</code></pre>
</div>
<div class="output display_data">
<p><img
src="vertopal_7478f51bb5654ca1890dd3e1edaa5c94/e9b402b1471f32c92b88d84cb829ea6053f3dc6e.png" /></p>
</div>
</div>
<div class="cell markdown" id="gwEPH2RxaZAB">
<p>Finally we will carry out the actual chi squared test to obtain a
p-value to determine if we reject or failt to reject the null
hypothesis.</p>
</div>
<div class="cell code" data-execution_count="6"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}"
id="WuqE4m60aeea" data-outputId="80a05b17-0a82-4918-cbf3-7df26fbdc59b">
<div class="sourceCode" id="cb12"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.stats <span class="im">import</span> chi2_contingency</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>chi2, p, dof, expected <span class="op">=</span> chi2_contingency(contingency_table)</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(p)</span></code></pre></div>
<div class="output stream stdout">
<pre><code>4.854537498244904e-98
</code></pre>
</div>
</div>
<div class="cell markdown" id="I48rtXUGaqgL">
<p>Using a significance level of α= 0.05 we can conclude that the type
of disaster does indeed affect the likelihood of 100+ deaths. We know
this since the p value is smaller that 0.05.</p>
</div>
<section id="2-sample-t-test-arya-palan" class="cell markdown"
id="SSAzuhnadcL3">
<h3>2 Sample T Test (Arya Palan)</h3>
</section>
<div class="cell code" data-execution_count="7" id="-k0J0TZgdgI9">
<div class="sourceCode" id="cb14"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> datetime <span class="im">import</span> datetime</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy <span class="im">import</span> stats</span></code></pre></div>
</div>
<div class="cell markdown" id="KNoBFzh7dnhM">
<p>Extract Relevant Data - For the 2 Sample T Test, we aim to compare
the mean Total Damages ('000 US$) for two natural disasters and
determine if there is a significant difference in costs. This is useful
to know since with this analysis, cities or countries can better prepare
for certain types of disasters by investing more in infrastructure that
is more resilient to disasters that have historically left the most
damage. The 2 natural disaster samples will be flood and storm.</p>
<p>Ho: The average cost of floods and storms are the same</p>
<p>Ha: The average cost of floods and storms are not the same</p>
</div>
<div class="cell code" data-execution_count="8"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:423}"
id="giy8Wl4tdzwp" data-outputId="685cf903-9db9-4a7a-ea27-af9b8ac0678d">
<div class="sourceCode" id="cb15"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Collecting Data</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(<span class="st">&#39;1970-2021_DISASTERS.csv&#39;</span>)</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>df.columns</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="co">#Get the all filled in values for each type</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>flood_df <span class="op">=</span> df[(df[<span class="st">&#39;Disaster Type&#39;</span>] <span class="op">==</span> <span class="st">&#39;Flood&#39;</span>) <span class="op">&amp;</span> (<span class="op">~</span>df[<span class="st">&quot;Total Damages (&#39;000 US$)&quot;</span>].isna())]</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>flood_df</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>storm_df <span class="op">=</span> df[(df[<span class="st">&#39;Disaster Type&#39;</span>] <span class="op">==</span> <span class="st">&#39;Storm&#39;</span>) <span class="op">&amp;</span> (<span class="op">~</span>df[<span class="st">&quot;Total Damages (&#39;000 US$)&quot;</span>].isna())]</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>storm_df</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a><span class="co">#Drop columns that we dont need</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>drop_cols <span class="op">=</span> [<span class="st">&#39;Dis No&#39;</span>, <span class="st">&#39;Seq&#39;</span>, <span class="st">&#39;Glide&#39;</span>, <span class="st">&#39;Disaster Group&#39;</span>, <span class="st">&#39;Disaster Subgroup&#39;</span>,</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>       <span class="st">&#39;Disaster Type&#39;</span>, <span class="st">&#39;Disaster Subtype&#39;</span>, <span class="st">&#39;Disaster Subsubtype&#39;</span>,</span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>       <span class="st">&#39;Event Name&#39;</span>, <span class="st">&#39;Country&#39;</span>, <span class="st">&#39;ISO&#39;</span>, <span class="st">&#39;Region&#39;</span>, <span class="st">&#39;Continent&#39;</span>, <span class="st">&#39;Location&#39;</span>,</span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>       <span class="st">&#39;Origin&#39;</span>, <span class="st">&#39;Associated Dis&#39;</span>, <span class="st">&#39;Associated Dis2&#39;</span>, <span class="st">&#39;OFDA Response&#39;</span>,</span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>       <span class="st">&#39;Appeal&#39;</span>, <span class="st">&#39;Declaration&#39;</span>, <span class="st">&#39;Aid Contribution&#39;</span>, <span class="st">&#39;Dis Mag Value&#39;</span>,</span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>       <span class="st">&#39;Dis Mag Scale&#39;</span>, <span class="st">&#39;Latitude&#39;</span>, <span class="st">&#39;Longitude&#39;</span>, <span class="st">&#39;Local Time&#39;</span>, <span class="st">&#39;River Basin&#39;</span>,</span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>       <span class="st">&#39;Start Year&#39;</span>, <span class="st">&#39;Start Month&#39;</span>, <span class="st">&#39;Start Day&#39;</span>, <span class="st">&#39;End Year&#39;</span>, <span class="st">&#39;End Month&#39;</span>,</span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>       <span class="st">&#39;End Day&#39;</span>, <span class="st">&#39;Total Deaths&#39;</span>, <span class="st">&#39;No Injured&#39;</span>, <span class="st">&#39;No Affected&#39;</span>, <span class="st">&#39;No Homeless&#39;</span>,</span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>       <span class="st">&#39;Total Affected&#39;</span>, <span class="st">&quot;Reconstruction Costs (&#39;000 US$)&quot;</span>,</span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a>       <span class="st">&quot;Insured Damages (&#39;000 US$)&quot;</span>, <span class="st">&#39;CPI&#39;</span>,</span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a>       <span class="st">&#39;Adm Level&#39;</span>, <span class="st">&#39;Admin1 Code&#39;</span>, <span class="st">&#39;Admin2 Code&#39;</span>, <span class="st">&#39;Geo Locations&#39;</span>]</span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a>flood_df <span class="op">=</span> flood_df.drop(columns <span class="op">=</span> drop_cols)</span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a>flood_df.reset_index(drop <span class="op">=</span> <span class="va">True</span>, inplace <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a>flood_df</span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a>storm_df <span class="op">=</span> storm_df.drop(columns <span class="op">=</span> drop_cols)</span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true" tabindex="-1"></a>storm_df.reset_index(drop <span class="op">=</span> <span class="va">True</span>, inplace <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb15-29"><a href="#cb15-29" aria-hidden="true" tabindex="-1"></a>storm_df</span>
<span id="cb15-30"><a href="#cb15-30" aria-hidden="true" tabindex="-1"></a></span></code></pre></div>
<div class="output execute_result" data-execution_count="8">

  <div id="df-e89a9be5-aaad-4c7f-84cf-9a5159a04043" class="colab-df-container">
    <div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Year</th>
      <th>Total Damages ('000 US$)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1970</td>
      <td>72475.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1970</td>
      <td>86400.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1971</td>
      <td>119219.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1971</td>
      <td>2500.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1971</td>
      <td>55000.0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>2088</th>
      <td>2021</td>
      <td>550000.0</td>
    </tr>
    <tr>
      <th>2089</th>
      <td>2021</td>
      <td>10000000.0</td>
    </tr>
    <tr>
      <th>2090</th>
      <td>2021</td>
      <td>10000.0</td>
    </tr>
    <tr>
      <th>2091</th>
      <td>2021</td>
      <td>215000.0</td>
    </tr>
    <tr>
      <th>2092</th>
      <td>2021</td>
      <td>500000.0</td>
    </tr>
  </tbody>
</table>
<p>2093 rows × 2 columns</p>
</div>
    <div class="colab-df-buttons">

  <div class="colab-df-container">
    <button class="colab-df-convert" onclick="convertToInteractive('df-e89a9be5-aaad-4c7f-84cf-9a5159a04043')"
            title="Convert this dataframe to an interactive table."
            style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960">
    <path d="M120-120v-720h720v720H120Zm60-500h600v-160H180v160Zm220 220h160v-160H400v160Zm0 220h160v-160H400v160ZM180-400h160v-160H180v160Zm440 0h160v-160H620v160ZM180-180h160v-160H180v160Zm440 0h160v-160H620v160Z"/>
  </svg>
    </button>

  <style>
    .colab-df-container {
      display:flex;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    .colab-df-buttons div {
      margin-bottom: 4px;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

    <script>
      const buttonEl =
        document.querySelector('#df-e89a9be5-aaad-4c7f-84cf-9a5159a04043 button.colab-df-convert');
      buttonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';

      async function convertToInteractive(key) {
        const element = document.querySelector('#df-e89a9be5-aaad-4c7f-84cf-9a5159a04043');
        const dataTable =
          await google.colab.kernel.invokeFunction('convertToInteractive',
                                                    [key], {});
        if (!dataTable) return;

        const docLinkHtml = 'Like what you see? Visit the ' +
          '<a target="_blank" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'
          + ' to learn more about interactive tables.';
        element.innerHTML = '';
        dataTable['output_type'] = 'display_data';
        await google.colab.output.renderOutput(dataTable, element);
        const docLink = document.createElement('div');
        docLink.innerHTML = docLinkHtml;
        element.appendChild(docLink);
      }
    </script>
  </div>


<div id="df-4a876391-99f8-4815-b7d4-0e3599a52bc7">
  <button class="colab-df-quickchart" onclick="quickchart('df-4a876391-99f8-4815-b7d4-0e3599a52bc7')"
            title="Suggest charts"
            style="display:none;">

<svg xmlns="http://www.w3.org/2000/svg" height="24px"viewBox="0 0 24 24"
     width="24px">
    <g>
        <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/>
    </g>
</svg>
  </button>

<style>
  .colab-df-quickchart {
      --bg-color: #E8F0FE;
      --fill-color: #1967D2;
      --hover-bg-color: #E2EBFA;
      --hover-fill-color: #174EA6;
      --disabled-fill-color: #AAA;
      --disabled-bg-color: #DDD;
  }

  [theme=dark] .colab-df-quickchart {
      --bg-color: #3B4455;
      --fill-color: #D2E3FC;
      --hover-bg-color: #434B5C;
      --hover-fill-color: #FFFFFF;
      --disabled-bg-color: #3B4455;
      --disabled-fill-color: #666;
  }

  .colab-df-quickchart {
    background-color: var(--bg-color);
    border: none;
    border-radius: 50%;
    cursor: pointer;
    display: none;
    fill: var(--fill-color);
    height: 32px;
    padding: 0;
    width: 32px;
  }

  .colab-df-quickchart:hover {
    background-color: var(--hover-bg-color);
    box-shadow: 0 1px 2px rgba(60, 64, 67, 0.3), 0 1px 3px 1px rgba(60, 64, 67, 0.15);
    fill: var(--button-hover-fill-color);
  }

  .colab-df-quickchart-complete:disabled,
  .colab-df-quickchart-complete:disabled:hover {
    background-color: var(--disabled-bg-color);
    fill: var(--disabled-fill-color);
    box-shadow: none;
  }

  .colab-df-spinner {
    border: 2px solid var(--fill-color);
    border-color: transparent;
    border-bottom-color: var(--fill-color);
    animation:
      spin 1s steps(1) infinite;
  }

  @keyframes spin {
    0% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
      border-left-color: var(--fill-color);
    }
    20% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    30% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
      border-right-color: var(--fill-color);
    }
    40% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    60% {
      border-color: transparent;
      border-right-color: var(--fill-color);
    }
    80% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-bottom-color: var(--fill-color);
    }
    90% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
    }
  }
</style>

  <script>
    async function quickchart(key) {
      const quickchartButtonEl =
        document.querySelector('#' + key + ' button');
      quickchartButtonEl.disabled = true;  // To prevent multiple clicks.
      quickchartButtonEl.classList.add('colab-df-spinner');
      try {
        const charts = await google.colab.kernel.invokeFunction(
            'suggestCharts', [key], {});
      } catch (error) {
        console.error('Error during call to suggestCharts:', error);
      }
      quickchartButtonEl.classList.remove('colab-df-spinner');
      quickchartButtonEl.classList.add('colab-df-quickchart-complete');
    }
    (() => {
      let quickchartButtonEl =
        document.querySelector('#df-4a876391-99f8-4815-b7d4-0e3599a52bc7 button');
      quickchartButtonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';
    })();
  </script>
</div>

  <div id="id_8a7388c4-79f9-4ef2-9f12-a7986f8ce20f">
    <style>
      .colab-df-generate {
        background-color: #E8F0FE;
        border: none;
        border-radius: 50%;
        cursor: pointer;
        display: none;
        fill: #1967D2;
        height: 32px;
        padding: 0 0 0 0;
        width: 32px;
      }

      .colab-df-generate:hover {
        background-color: #E2EBFA;
        box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
        fill: #174EA6;
      }

      [theme=dark] .colab-df-generate {
        background-color: #3B4455;
        fill: #D2E3FC;
      }

      [theme=dark] .colab-df-generate:hover {
        background-color: #434B5C;
        box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
        filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
        fill: #FFFFFF;
      }
    </style>
    <button class="colab-df-generate" onclick="generateWithVariable('storm_df')"
            title="Generate code using this dataframe."
            style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px"viewBox="0 0 24 24"
       width="24px">
    <path d="M7,19H8.4L18.45,9,17,7.55,7,17.6ZM5,21V16.75L18.45,3.32a2,2,0,0,1,2.83,0l1.4,1.43a1.91,1.91,0,0,1,.58,1.4,1.91,1.91,0,0,1-.58,1.4L9.25,21ZM18.45,9,17,7.55Zm-12,3A5.31,5.31,0,0,0,4.9,8.1,5.31,5.31,0,0,0,1,6.5,5.31,5.31,0,0,0,4.9,4.9,5.31,5.31,0,0,0,6.5,1,5.31,5.31,0,0,0,8.1,4.9,5.31,5.31,0,0,0,12,6.5,5.46,5.46,0,0,0,6.5,12Z"/>
  </svg>
    </button>
    <script>
      (() => {
      const buttonEl =
        document.querySelector('#id_8a7388c4-79f9-4ef2-9f12-a7986f8ce20f button.colab-df-generate');
      buttonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';

      buttonEl.onclick = () => {
        google.colab.notebook.generateWithVariable('storm_df');
      }
      })();
    </script>
  </div>

    </div>
  </div>

</div>
</div>
<div class="cell markdown" id="IEESBX3Vd_Jb">
<p>Describe and Visualize</p>
</div>
<div class="cell code" data-execution_count="9"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:335}"
id="b16Uj5kcd-HU" data-outputId="df8eda98-b9e9-40f8-96f4-1ed768ce0554">
<div class="sourceCode" id="cb16"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>storm_df[<span class="st">&quot;Total Damages (&#39;000 US$)&quot;</span>].describe()</span></code></pre></div>
<div class="output execute_result" data-execution_count="9">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Total Damages ('000 US$)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>2.093000e+03</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>7.836804e+05</td>
    </tr>
    <tr>
      <th>std</th>
      <td>4.447079e+06</td>
    </tr>
    <tr>
      <th>min</th>
      <td>5.000000e+00</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>1.000000e+04</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>9.000000e+04</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>4.000000e+05</td>
    </tr>
    <tr>
      <th>max</th>
      <td>1.250000e+08</td>
    </tr>
  </tbody>
</table>
</div><br><label><b>dtype:</b> float64</label>
</div>
</div>
<div class="cell code" data-execution_count="10"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:335}"
id="j6Hdy9XPeDrX" data-outputId="3a83be3b-edce-4d99-d258-81657bfb8ba2">
<div class="sourceCode" id="cb17"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>flood_df[<span class="st">&quot;Total Damages (&#39;000 US$)&quot;</span>].describe()</span></code></pre></div>
<div class="output execute_result" data-execution_count="10">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Total Damages ('000 US$)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>1.743000e+03</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>5.202314e+05</td>
    </tr>
    <tr>
      <th>std</th>
      <td>2.045793e+06</td>
    </tr>
    <tr>
      <th>min</th>
      <td>3.000000e+00</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>8.900000e+03</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>5.200000e+04</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>2.666500e+05</td>
    </tr>
    <tr>
      <th>max</th>
      <td>4.000000e+07</td>
    </tr>
  </tbody>
</table>
</div><br><label><b>dtype:</b> float64</label>
</div>
</div>
<div class="cell markdown" id="rn_fABQEeGh2">
<p>Key Values:</p>
<p>Mean Flood Cost: 783,680,400</p>
<p>Mean Storm Cost: 520,000,000</p>
<p>Comparing the median value for both, floods cost a median of
52,000,000 while storms cost a median of 90,000,000. This shows there
are major outliers but they cannot be removed since they provide crucial
information</p>
</div>
<div class="cell code" data-execution_count="11"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:887}"
id="NOoXKGbDeHgI" data-outputId="8d2f7829-3835-4bb3-8754-dd26977ea202">
<div class="sourceCode" id="cb18"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Create plots for both to see damages over time</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="co">#These plots show the cost for each year and this is more viusally descriptive than a boxplot since there are some years with major costs which compress the graph</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>plt.bar(flood_df[<span class="st">&#39;Year&#39;</span>], flood_df[<span class="st">&quot;Total Damages (&#39;000 US$)&quot;</span>])</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&quot;Flood Cost&quot;</span>)</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&quot;Cost&quot;</span>)</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>plt.bar(storm_df[<span class="st">&#39;Year&#39;</span>],storm_df[<span class="st">&quot;Total Damages (&#39;000 US$)&quot;</span>])</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&quot;Storm Cost&quot;</span>)</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&quot;Cost&quot;</span>)</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="output display_data">
<p><img
src="vertopal_7478f51bb5654ca1890dd3e1edaa5c94/0e89d53e551049a85306381547e72db52e0ca3fb.png" /></p>
</div>
<div class="output display_data">
<p><img
src="vertopal_7478f51bb5654ca1890dd3e1edaa5c94/8a229793c7d73e264210afa400e585dca4919110.png" /></p>
</div>
</div>
<div class="cell markdown" id="GWBwRAwgeKq5">
<p>Perform 2 Sample T Test Analysis</p>
</div>
<div class="cell code" data-execution_count="12"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}"
id="eh-FNKrPeRUX" data-outputId="ca8c9b96-d14f-49e8-ae6e-76341d124d6e">
<div class="sourceCode" id="cb19"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>t_stat, p_value <span class="op">=</span> stats.ttest_ind(storm_df[<span class="st">&quot;Total Damages (&#39;000 US$)&quot;</span>], flood_df[<span class="st">&quot;Total Damages (&#39;000 US$)&quot;</span>], equal_var<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the results</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f&quot;T-statistic: </span><span class="sc">{</span>t_stat<span class="sc">}</span><span class="ss">, P-value: </span><span class="sc">{</span>p_value<span class="sc">}</span><span class="ss">&quot;</span>)</span></code></pre></div>
<div class="output stream stdout">
<pre><code>T-statistic: 2.4201153958300257, P-value: 0.015573593075073628
</code></pre>
</div>
</div>
<div class="cell markdown" id="_2TiPheKeSET">
<p>Using an alpha level of 0.05, we can reject the null hypothesis with
a p value of 0.01557, and prefer the alternate hypothesis that there is
a significant difference in the average cost between floods and
storms.</p>
<p>From previous mean analysis and looking at the graphs, we can see
that floods have historically been more costly to cities and government
must invest in stronger infrastructure that will negate flood damages
for the future.</p>
</div>
<div class="cell markdown" id="RtcnYndpaX6x">
<p>##Z Test (Evan Liu)</p>
<p>The primary goal of this z-test is to determine whether there is a
significant difference between the mean number of injuries in high
Consumer Price Index (CPI) conditions (i.e., CPI above the median) and
the overall mean number of injuries. The test seeks to understand if
higher economic conditions, as reflected by CPI, have an impact on the
severity of injuries caused by disasters.</p>
<p><strong>H0:</strong> There is no significant difference between the
mean number of injuries in high CPI conditions (CPI above the median)
and the overall mean number of injuries.</p>
<p><strong>HA:</strong> There is a significant difference between the
mean number of injuries in high CPI conditions and the overall mean
number of injuries.</p>
</div>
<div class="cell markdown" id="DPBaeDvWcge8">
<p>Machine Learning Techniques:</p>
<p>Regression: evan arya</p>
<ul>
<li>Linear Regression to predict the amount of deaths per increase in
CPI.</li>
<li>Create a Linear Regression machine learning algorithm that factors
in the CPI and correlates it to total number of deaths.</li>
</ul>
<p>KNN: wesley marvin</p>
<ul>
<li>kNN to predict number of deaths based on category of natural
disaster</li>
<li>Create a KNN Machine learning algorithm that factors in the year,
natural disaster type, CPI, and location in order to determine an
estimated number of deaths.</li>
</ul>
</div>
<div class="cell code" data-execution_count="13"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:600}"
id="wmsO5C8kagSG" data-outputId="61055130-d0c3-4061-c4b3-8f134a0a354f">
<div class="sourceCode" id="cb21"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy <span class="im">import</span> stats</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>df_clean <span class="op">=</span> data[[<span class="st">&#39;No Injured&#39;</span>, <span class="st">&#39;CPI&#39;</span>]].dropna()</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>cpi_median <span class="op">=</span> df_clean[<span class="st">&#39;CPI&#39;</span>].median()</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>high_cpi_injuries <span class="op">=</span> df_clean[df_clean[<span class="st">&#39;CPI&#39;</span>] <span class="op">&gt;</span> cpi_median][<span class="st">&#39;No Injured&#39;</span>]</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>overall_mean_injuries <span class="op">=</span> df_clean[<span class="st">&#39;No Injured&#39;</span>].mean()</span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>z_stat, p_value <span class="op">=</span> stats.ttest_1samp(high_cpi_injuries, overall_mean_injuries)</span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;Z-statistic:&quot;</span>, z_stat)</span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;P-value:&quot;</span>, p_value)</span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a>sns.histplot(high_cpi_injuries, bins<span class="op">=</span><span class="dv">30</span>, kde<span class="op">=</span><span class="va">True</span>, color<span class="op">=</span><span class="st">&#39;blue&#39;</span>, label<span class="op">=</span><span class="st">&#39;High CPI Injuries&#39;</span>)</span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>plt.axvline(overall_mean_injuries, color<span class="op">=</span><span class="st">&#39;red&#39;</span>, linestyle<span class="op">=</span><span class="st">&#39;dashed&#39;</span>, linewidth<span class="op">=</span><span class="dv">2</span>, label<span class="op">=</span><span class="st">&#39;Overall Mean Injuries&#39;</span>)</span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&#39;Distribution of Injuries in High CPI Conditions&#39;</span>)</span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&#39;Number of Injuries&#39;</span>)</span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&#39;Frequency&#39;</span>)</span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="output stream stdout">
<pre><code>Z-statistic: -0.25943930788897906
P-value: 0.7953275700837565
</code></pre>
</div>
<div class="output display_data">
<p><img
src="vertopal_7478f51bb5654ca1890dd3e1edaa5c94/99216269d43fab1befb6894c0a095d66be3da66d.png" /></p>
</div>
</div>
<div class="cell markdown" id="hQPfya-YaixD">
<p>A z-statistic close to 0 suggests that the sample mean of injuries in
high CPI conditions is very close to the overall mean of injuries. In
this case, a z-statistic of -0.259 indicates that the difference between
the mean number of injuries in high CPI conditions and the overall mean
is quite small, which implies no significant deviation.</p>
<p>Since the p-value is 0.795 (greater than 0.05), we fail to reject the
null hypothesis. This indicates that there is no significant difference
between the mean number of injuries in high CPI conditions and the
overall mean number of injuries. The z-statistic being near zero shows
that the mean number of injuries in high CPI conditions closely
resembles the overall mean, further supporting the idea that CPI might
not have a strong influence on the number of injuries.</p>
</div>
<section id="knn-code-and-analysis" class="cell markdown"
id="6C_QlEDnYkvG">
<h1>KNN Code and Analysis:</h1>
</section>
<div class="cell markdown" id="hk_SjJQYVkop">
<p>Here we will try to use the geolocation as well as disaster type in
order to predict the number of deaths given that information. In order
to balance things out we will use a log scaler on the total deaths in
order to factor in for some outliers.</p>
</div>
<div class="cell code" data-execution_count="14"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:617}"
id="Gscq_6SUkZw_" data-outputId="2e3b1d93-deeb-476d-e811-b6053327f026">
<div class="sourceCode" id="cb23"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.model_selection <span class="im">import</span> train_test_split, GridSearchCV</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.preprocessing <span class="im">import</span> LabelEncoder</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.neighbors <span class="im">import</span> KNeighborsRegressor</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> mean_squared_error, r2_score</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>relevant_columns <span class="op">=</span> [<span class="st">&#39;Year&#39;</span>, <span class="st">&#39;Disaster Type&#39;</span>, <span class="st">&#39;Geo Locations&#39;</span>, <span class="st">&#39;Total Deaths&#39;</span>]</span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>data_filtered <span class="op">=</span> data[relevant_columns]</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a><span class="co">#Drop rows where total deaths missing</span></span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>data_filtered <span class="op">=</span> data_filtered.dropna(subset<span class="op">=</span>[<span class="st">&#39;Total Deaths&#39;</span>])</span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a><span class="co">#Drop rows with no locations</span></span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>data_filtered <span class="op">=</span> data_filtered.dropna(subset<span class="op">=</span>[<span class="st">&#39;Geo Locations&#39;</span>])</span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a><span class="co">#Handle outliers using IQR</span></span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a>Q1 <span class="op">=</span> data_filtered[<span class="st">&#39;Total Deaths&#39;</span>].quantile(<span class="fl">0.10</span>)</span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a>Q3 <span class="op">=</span> data_filtered[<span class="st">&#39;Total Deaths&#39;</span>].quantile(<span class="fl">0.90</span>)</span>
<span id="cb23-22"><a href="#cb23-22" aria-hidden="true" tabindex="-1"></a>IQR <span class="op">=</span> Q3 <span class="op">-</span> Q1</span>
<span id="cb23-23"><a href="#cb23-23" aria-hidden="true" tabindex="-1"></a>lower_bound <span class="op">=</span> Q1 <span class="op">-</span> <span class="fl">1.5</span> <span class="op">*</span> IQR</span>
<span id="cb23-24"><a href="#cb23-24" aria-hidden="true" tabindex="-1"></a>upper_bound <span class="op">=</span> Q3 <span class="op">+</span> <span class="fl">1.5</span> <span class="op">*</span> IQR</span>
<span id="cb23-25"><a href="#cb23-25" aria-hidden="true" tabindex="-1"></a>data_filtered <span class="op">=</span> data_filtered[(data_filtered[<span class="st">&#39;Total Deaths&#39;</span>] <span class="op">&gt;=</span> lower_bound) <span class="op">&amp;</span></span>
<span id="cb23-26"><a href="#cb23-26" aria-hidden="true" tabindex="-1"></a>                               (data_filtered[<span class="st">&#39;Total Deaths&#39;</span>] <span class="op">&lt;=</span> upper_bound)]</span>
<span id="cb23-27"><a href="#cb23-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-28"><a href="#cb23-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-29"><a href="#cb23-29" aria-hidden="true" tabindex="-1"></a>label_encoder_disaster <span class="op">=</span> LabelEncoder()</span>
<span id="cb23-30"><a href="#cb23-30" aria-hidden="true" tabindex="-1"></a>label_encoder_location <span class="op">=</span> LabelEncoder()</span>
<span id="cb23-31"><a href="#cb23-31" aria-hidden="true" tabindex="-1"></a>data_filtered[<span class="st">&#39;Disaster Type&#39;</span>] <span class="op">=</span> label_encoder_disaster.fit_transform(data_filtered[<span class="st">&#39;Disaster Type&#39;</span>])</span>
<span id="cb23-32"><a href="#cb23-32" aria-hidden="true" tabindex="-1"></a>data_filtered[<span class="st">&#39;Geo Locations&#39;</span>] <span class="op">=</span> label_encoder_location.fit_transform(data_filtered[<span class="st">&#39;Geo Locations&#39;</span>])</span>
<span id="cb23-33"><a href="#cb23-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-34"><a href="#cb23-34" aria-hidden="true" tabindex="-1"></a><span class="co">#Apply log to factor for outliers</span></span>
<span id="cb23-35"><a href="#cb23-35" aria-hidden="true" tabindex="-1"></a>data_filtered[<span class="st">&#39;Total Deaths&#39;</span>] <span class="op">=</span> np.log1p(data_filtered[<span class="st">&#39;Total Deaths&#39;</span>])</span>
<span id="cb23-36"><a href="#cb23-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-37"><a href="#cb23-37" aria-hidden="true" tabindex="-1"></a><span class="co">#Split data into x and y</span></span>
<span id="cb23-38"><a href="#cb23-38" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> data_filtered[[<span class="st">&#39;Disaster Type&#39;</span>, <span class="st">&#39;Geo Locations&#39;</span>]]</span>
<span id="cb23-39"><a href="#cb23-39" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> data_filtered[<span class="st">&#39;Total Deaths&#39;</span>]</span>
<span id="cb23-40"><a href="#cb23-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-41"><a href="#cb23-41" aria-hidden="true" tabindex="-1"></a><span class="co">#create training and test groups</span></span>
<span id="cb23-42"><a href="#cb23-42" aria-hidden="true" tabindex="-1"></a>X_train, X_test, y_train, y_test <span class="op">=</span> train_test_split(X, y, test_size<span class="op">=</span><span class="fl">0.2</span>, random_state<span class="op">=</span><span class="dv">42</span>)</span>
<span id="cb23-43"><a href="#cb23-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-44"><a href="#cb23-44" aria-hidden="true" tabindex="-1"></a><span class="co">#hyperparamater tuning</span></span>
<span id="cb23-45"><a href="#cb23-45" aria-hidden="true" tabindex="-1"></a>param_grid <span class="op">=</span> {</span>
<span id="cb23-46"><a href="#cb23-46" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;n_neighbors&#39;</span>: <span class="bu">range</span>(<span class="dv">1</span>, <span class="dv">20</span>),</span>
<span id="cb23-47"><a href="#cb23-47" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;weights&#39;</span>: [<span class="st">&#39;uniform&#39;</span>, <span class="st">&#39;distance&#39;</span>],</span>
<span id="cb23-48"><a href="#cb23-48" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;metric&#39;</span>: [<span class="st">&#39;euclidean&#39;</span>, <span class="st">&#39;manhattan&#39;</span>]</span>
<span id="cb23-49"><a href="#cb23-49" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb23-50"><a href="#cb23-50" aria-hidden="true" tabindex="-1"></a>grid_search <span class="op">=</span> GridSearchCV(KNeighborsRegressor(), param_grid, cv<span class="op">=</span><span class="dv">5</span>, scoring<span class="op">=</span><span class="st">&#39;r2&#39;</span>)</span>
<span id="cb23-51"><a href="#cb23-51" aria-hidden="true" tabindex="-1"></a>grid_search.fit(X_train, y_train)</span>
<span id="cb23-52"><a href="#cb23-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-53"><a href="#cb23-53" aria-hidden="true" tabindex="-1"></a>best_params <span class="op">=</span> grid_search.best_params_</span>
<span id="cb23-54"><a href="#cb23-54" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f&quot;Best Parameters: </span><span class="sc">{</span>best_params<span class="sc">}</span><span class="ss">&quot;</span>)</span>
<span id="cb23-55"><a href="#cb23-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-56"><a href="#cb23-56" aria-hidden="true" tabindex="-1"></a><span class="co">#Train final KNN model</span></span>
<span id="cb23-57"><a href="#cb23-57" aria-hidden="true" tabindex="-1"></a>knn <span class="op">=</span> KNeighborsRegressor(</span>
<span id="cb23-58"><a href="#cb23-58" aria-hidden="true" tabindex="-1"></a>    n_neighbors<span class="op">=</span>best_params[<span class="st">&#39;n_neighbors&#39;</span>],</span>
<span id="cb23-59"><a href="#cb23-59" aria-hidden="true" tabindex="-1"></a>    weights<span class="op">=</span>best_params[<span class="st">&#39;weights&#39;</span>],</span>
<span id="cb23-60"><a href="#cb23-60" aria-hidden="true" tabindex="-1"></a>    metric<span class="op">=</span>best_params[<span class="st">&#39;metric&#39;</span>]</span>
<span id="cb23-61"><a href="#cb23-61" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb23-62"><a href="#cb23-62" aria-hidden="true" tabindex="-1"></a>knn.fit(X_train, y_train)</span>
<span id="cb23-63"><a href="#cb23-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-64"><a href="#cb23-64" aria-hidden="true" tabindex="-1"></a><span class="co">#predict on test set</span></span>
<span id="cb23-65"><a href="#cb23-65" aria-hidden="true" tabindex="-1"></a>y_pred <span class="op">=</span> knn.predict(X_test)</span>
<span id="cb23-66"><a href="#cb23-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-67"><a href="#cb23-67" aria-hidden="true" tabindex="-1"></a><span class="co">#Reverse the log for actual number</span></span>
<span id="cb23-68"><a href="#cb23-68" aria-hidden="true" tabindex="-1"></a>y_test_original <span class="op">=</span> np.expm1(y_test)</span>
<span id="cb23-69"><a href="#cb23-69" aria-hidden="true" tabindex="-1"></a>y_pred_original <span class="op">=</span> np.expm1(y_pred)</span>
<span id="cb23-70"><a href="#cb23-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-71"><a href="#cb23-71" aria-hidden="true" tabindex="-1"></a><span class="co">#Evaluate model</span></span>
<span id="cb23-72"><a href="#cb23-72" aria-hidden="true" tabindex="-1"></a>mse <span class="op">=</span> mean_squared_error(y_test_original, y_pred_original)</span>
<span id="cb23-73"><a href="#cb23-73" aria-hidden="true" tabindex="-1"></a>r2 <span class="op">=</span> r2_score(y_test_original, y_pred_original)</span>
<span id="cb23-74"><a href="#cb23-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-75"><a href="#cb23-75" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f&quot;Mean Squared Error (MSE): </span><span class="sc">{</span>mse<span class="sc">}</span><span class="ss">&quot;</span>)</span>
<span id="cb23-76"><a href="#cb23-76" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f&quot;R² Score: </span><span class="sc">{</span>r2<span class="sc">}</span><span class="ss">&quot;</span>)</span>
<span id="cb23-77"><a href="#cb23-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-78"><a href="#cb23-78" aria-hidden="true" tabindex="-1"></a><span class="co">#Plot the actual vs predicted</span></span>
<span id="cb23-79"><a href="#cb23-79" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb23-80"><a href="#cb23-80" aria-hidden="true" tabindex="-1"></a>plt.scatter(y_test_original, y_pred_original, alpha<span class="op">=</span><span class="fl">0.6</span>, edgecolor<span class="op">=</span><span class="st">&#39;k&#39;</span>, label<span class="op">=</span><span class="st">&#39;Predicted vs Actual&#39;</span>)</span>
<span id="cb23-81"><a href="#cb23-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-82"><a href="#cb23-82" aria-hidden="true" tabindex="-1"></a><span class="co">#Plot prediction line</span></span>
<span id="cb23-83"><a href="#cb23-83" aria-hidden="true" tabindex="-1"></a>plt.plot([y_test_original.<span class="bu">min</span>(), y_test_original.<span class="bu">max</span>()],</span>
<span id="cb23-84"><a href="#cb23-84" aria-hidden="true" tabindex="-1"></a>         [y_test_original.<span class="bu">min</span>(), y_test_original.<span class="bu">max</span>()], <span class="st">&#39;r--&#39;</span>, lw<span class="op">=</span><span class="dv">2</span>, label<span class="op">=</span><span class="st">&#39;Ideal Prediction Line&#39;</span>)</span>
<span id="cb23-85"><a href="#cb23-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-86"><a href="#cb23-86" aria-hidden="true" tabindex="-1"></a><span class="co">#Labeleling the plot</span></span>
<span id="cb23-87"><a href="#cb23-87" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&#39;Actual vs Predicted Total Deaths (Log-Scaled Target)&#39;</span>)</span>
<span id="cb23-88"><a href="#cb23-88" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&#39;Actual Total Deaths&#39;</span>)</span>
<span id="cb23-89"><a href="#cb23-89" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&#39;Predicted Total Deaths&#39;</span>)</span>
<span id="cb23-90"><a href="#cb23-90" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb23-91"><a href="#cb23-91" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>, which<span class="op">=</span><span class="st">&quot;both&quot;</span>, ls<span class="op">=</span><span class="st">&quot;--&quot;</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>)</span>
<span id="cb23-92"><a href="#cb23-92" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb23-93"><a href="#cb23-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-94"><a href="#cb23-94" aria-hidden="true" tabindex="-1"></a></span></code></pre></div>
<div class="output stream stdout">
<pre><code>Best Parameters: {&#39;metric&#39;: &#39;manhattan&#39;, &#39;n_neighbors&#39;: 19, &#39;weights&#39;: &#39;distance&#39;}
Mean Squared Error (MSE): 1073.0401988687681
R² Score: -0.05801598898948446
</code></pre>
</div>
<div class="output display_data">
<p><img
src="vertopal_7478f51bb5654ca1890dd3e1edaa5c94/8a53bd64b4d106b186cae5d2115d556be445b1e9.png" /></p>
</div>
</div>
<div class="cell markdown" id="IoTaa_R5S8qM">
<p>Here we see a majority of the data is bundled together into one side
especially leaning towards a lower amount of deaths. It is very
difficult to properly predict due to a heavy skew right.</p>
<p>Let's try plotting out the residual plot and see where that gets
us.</p>
</div>
<div class="cell code" data-execution_count="15"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:564}"
id="B9ReBdBHTZFt" data-outputId="0336b098-0132-424a-fbac-c7b17a993c58">
<div class="sourceCode" id="cb25"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Plot Residual</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>residuals <span class="op">=</span> y_test_original <span class="op">-</span> y_pred_original</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>plt.scatter(y_test_original, residuals, alpha<span class="op">=</span><span class="fl">0.6</span>, edgecolor<span class="op">=</span><span class="st">&#39;k&#39;</span>, label<span class="op">=</span><span class="st">&#39;Residuals&#39;</span>)</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>plt.axhline(<span class="dv">0</span>, color<span class="op">=</span><span class="st">&#39;r&#39;</span>, linestyle<span class="op">=</span><span class="st">&#39;--&#39;</span>, lw<span class="op">=</span><span class="dv">2</span>, label<span class="op">=</span><span class="st">&#39;Zero Residual Line&#39;</span>)</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a><span class="co">#Add Labels</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&#39;Residual Plot (Log-Scaled Target)&#39;</span>)</span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&#39;Actual Total Deaths&#39;</span>)</span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&#39;Residuals (Actual - Predicted)&#39;</span>)</span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>, which<span class="op">=</span><span class="st">&quot;both&quot;</span>, ls<span class="op">=</span><span class="st">&quot;--&quot;</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>)</span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="output display_data">
<p><img
src="vertopal_7478f51bb5654ca1890dd3e1edaa5c94/0a3c8643f9b4baa9495d09f552ec17ec68848a0f.png" /></p>
</div>
</div>
<div class="cell markdown" id="B8UQTpkbTiqj">
<p>Here we can see that as the number of deaths increases we have a
harder and harder time to properly discern the amount of deaths based on
these factors.</p>
</div>
<section id="knn-analysis" class="cell markdown" id="pVMKQaZuhiH4">
<h3>KNN Analysis</h3>
<p>The model's R^2 value of approximately -0.058 indicates that the
predictions perform worse than simply using the mean value of total
deaths as a baseline predictor. This suggests that didaster type and
geographic location do not sufficiently capture the variability in total
deaths, potentially due to missing critical factors or inherent
complexities in the data. <break></p>
<p>Although, this model did not give us a a way to directly measure the
impact of disasters, it still Analysis of the Model's Performance and
Broader Implications The model's 𝑅 2 R 2 value of approximately -0.058
indicates that the predictions perform worse than simply using the mean
value of total deaths as a baseline predictor. This suggests that the
features used in the model—disaster categories and types—do not
sufficiently capture the variability in total deaths, potentially due to
missing critical factors or inherent complexities in the data.</p>
<p>Broader Analysis and Insights</p>
<ol>
<li>Relationship Between Disaster Types and Casualties Casualties and
disaster types: Different types of disasters, such as floods,
hurricanes, or earthquakes, vary significantly in their impact depending
on factors like severity, preparedness, and duration. For example,
floods might cause fewer deaths but displace many, while earthquakes
often have more concentrated casualties due to structural collapses. The
low 𝑅 2 R 2 value indicates that disaster type alone is not a strong
predictor of total deaths. It likely needs to be paired with
complementary features like magnitude, warning time, or socioeconomic
characteristics of the affected region.</li>
<li>Geographic and Regional Characteristics Disproportionate Impacts:
Regions with weaker infrastructure, inadequate disaster preparedness, or
high population densities often experience disproportionate impacts. For
instance: Developing countries often face higher death tolls from
cyclones due to a lack of early warning systems. Coastal areas with
insufficient flood defenses are more vulnerable to storm surges. The
dataset might lack critical information about these regional
characteristics, reducing the model's ability to accurately predict
outcomes.</li>
<li>Factors Affecting Vulnerability Vulnerability is often influenced
by: Socioeconomic conditions: Poorer communities may lack access to
disaster mitigation technologies and healthcare. Government
preparedness: Investments in early warning systems, evacuation plans,
and resilient infrastructure can reduce death tolls significantly.
Environmental degradation: Deforestation and urban sprawl increase the
severity of floods and heatwaves, amplifying disaster impacts. Including
these variables in future models could provide a more comprehensive
understanding of why certain areas or populations experience higher
casualties.</li>
</ol>
</section>
<section id="linear-regression-code-and-analysis" class="cell markdown"
id="IuDQ1r4zYrhW">
<h1>LINEAR REGRESSION CODE AND ANALYSIS</h1>
</section>
<div class="cell markdown" id="8yXv3BPLZbuW">
<p>We used this Linear Regression Model to determine if there is a
statistically significant relationship between the CPI (a measure of
inflation or economic health) and the total number of disaster-related
deaths over time. We could also assess whether changes in CPI might help
predict the number of deaths caused by disasters. While there may not be
a direct causal relationship, this analysis could reveal economic
conditions' indirect effects on disaster outcomes. Overall, we are
trying to investigate if inflationary trends (reflected by CPI)
correlate with increased disaster-related deaths, potentially due to
resource constraints in disaster preparedness and response.</p>
</div>
<div class="cell code" data-execution_count="16"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:607}"
id="MVhJdqqZYvLK" data-outputId="3c91cea8-a7d1-41be-f1be-aa57be7e481d">
<div class="sourceCode" id="cb26"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.linear_model <span class="im">import</span> LinearRegression</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> mean_squared_error, r2_score</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Clean the data (assuming columns &#39;CPI&#39; and &#39;Total_Deaths&#39; exist)</span></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Replace &#39;CPI&#39; and &#39;Total_Deaths&#39; with actual column names in your dataset</span></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> data[[<span class="st">&#39;CPI&#39;</span>, <span class="st">&#39;Total Deaths&#39;</span>]].dropna()</span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> data[data[<span class="st">&#39;Total Deaths&#39;</span>] <span class="op">&gt;</span> <span class="dv">0</span>]  <span class="co"># Exclude rows with zero or negative deaths for meaningful analysis</span></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Features and target</span></span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> data[<span class="st">&#39;CPI&#39;</span>].values.reshape(<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> data[<span class="st">&#39;Total Deaths&#39;</span>].values</span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a linear regression model</span></span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> LinearRegression()</span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a>model.fit(X, y)</span>
<span id="cb26-20"><a href="#cb26-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-21"><a href="#cb26-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Predictions</span></span>
<span id="cb26-22"><a href="#cb26-22" aria-hidden="true" tabindex="-1"></a>y_pred <span class="op">=</span> model.predict(X)</span>
<span id="cb26-23"><a href="#cb26-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-24"><a href="#cb26-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Model evaluation</span></span>
<span id="cb26-25"><a href="#cb26-25" aria-hidden="true" tabindex="-1"></a>mse <span class="op">=</span> mean_squared_error(y, y_pred)</span>
<span id="cb26-26"><a href="#cb26-26" aria-hidden="true" tabindex="-1"></a>r2 <span class="op">=</span> r2_score(y, y_pred)</span>
<span id="cb26-27"><a href="#cb26-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-28"><a href="#cb26-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the results</span></span>
<span id="cb26-29"><a href="#cb26-29" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb26-30"><a href="#cb26-30" aria-hidden="true" tabindex="-1"></a>sns.scatterplot(x<span class="op">=</span>data[<span class="st">&#39;CPI&#39;</span>], y<span class="op">=</span>data[<span class="st">&#39;Total Deaths&#39;</span>], label<span class="op">=</span><span class="st">&#39;Actual Data&#39;</span>, color<span class="op">=</span><span class="st">&#39;blue&#39;</span>)</span>
<span id="cb26-31"><a href="#cb26-31" aria-hidden="true" tabindex="-1"></a>plt.plot(data[<span class="st">&#39;CPI&#39;</span>], y_pred, color<span class="op">=</span><span class="st">&#39;red&#39;</span>, label<span class="op">=</span><span class="st">&#39;Regression Line&#39;</span>)</span>
<span id="cb26-32"><a href="#cb26-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-33"><a href="#cb26-33" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding labels and title</span></span>
<span id="cb26-34"><a href="#cb26-34" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&#39;Linear Regression: CPI vs. Total Deaths&#39;</span>, fontsize<span class="op">=</span><span class="dv">16</span>)</span>
<span id="cb26-35"><a href="#cb26-35" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&#39;Consumer Price Index (CPI)&#39;</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb26-36"><a href="#cb26-36" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&#39;Total Deaths&#39;</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb26-37"><a href="#cb26-37" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb26-38"><a href="#cb26-38" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>)</span>
<span id="cb26-39"><a href="#cb26-39" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb26-40"><a href="#cb26-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-41"><a href="#cb26-41" aria-hidden="true" tabindex="-1"></a><span class="co"># Display model metrics on the plot</span></span>
<span id="cb26-42"><a href="#cb26-42" aria-hidden="true" tabindex="-1"></a>plt.text(</span>
<span id="cb26-43"><a href="#cb26-43" aria-hidden="true" tabindex="-1"></a>    x<span class="op">=</span><span class="bu">min</span>(data[<span class="st">&#39;CPI&#39;</span>]),</span>
<span id="cb26-44"><a href="#cb26-44" aria-hidden="true" tabindex="-1"></a>    y<span class="op">=</span><span class="bu">max</span>(data[<span class="st">&#39;Total Deaths&#39;</span>]),</span>
<span id="cb26-45"><a href="#cb26-45" aria-hidden="true" tabindex="-1"></a>    s<span class="op">=</span><span class="ss">f&#39;MSE: </span><span class="sc">{</span>mse<span class="sc">:.2f}</span><span class="ch">\n</span><span class="ss">R²: </span><span class="sc">{</span>r2<span class="sc">:.2f}</span><span class="ss">&#39;</span>,</span>
<span id="cb26-46"><a href="#cb26-46" aria-hidden="true" tabindex="-1"></a>    fontsize<span class="op">=</span><span class="dv">10</span>,</span>
<span id="cb26-47"><a href="#cb26-47" aria-hidden="true" tabindex="-1"></a>    bbox<span class="op">=</span><span class="bu">dict</span>(facecolor<span class="op">=</span><span class="st">&#39;white&#39;</span>, alpha<span class="op">=</span><span class="fl">0.7</span>, edgecolor<span class="op">=</span><span class="st">&#39;black&#39;</span>)</span>
<span id="cb26-48"><a href="#cb26-48" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb26-49"><a href="#cb26-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-50"><a href="#cb26-50" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb26-51"><a href="#cb26-51" aria-hidden="true" tabindex="-1"></a></span></code></pre></div>
<div class="output display_data">
<p><img
src="vertopal_7478f51bb5654ca1890dd3e1edaa5c94/31925adb8ffa20e7b97f8ce073c21544cad4c373.png" /></p>
</div>
</div>
<div class="cell markdown" id="pyZr7BnEWJFN">
<p>It is hard to see the relationship from this graph! There are too
many outliers and high values in the death column, but we do not want to
remove them since they are still valuable data points. what can we do???
--&gt; Log transform the deaths and redo the analysis</p>
</div>
<div class="cell code" data-execution_count="17"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:600}"
id="euN_yPvyT5re" data-outputId="c74878ba-dd71-43dc-b7ba-4d314f26d183">
<div class="sourceCode" id="cb27"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.linear_model <span class="im">import</span> LinearRegression</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> mean_squared_error, r2_score</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Load and clean the data</span></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> pd.read_csv(<span class="st">&#39;1970-2021_DISASTERS.csv&#39;</span>)</span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> data[[<span class="st">&#39;CPI&#39;</span>, <span class="st">&#39;Total Deaths&#39;</span>]].dropna()</span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> data[data[<span class="st">&#39;Total Deaths&#39;</span>] <span class="op">&gt;</span> <span class="dv">0</span>]  <span class="co"># Remove non-positive deaths</span></span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Apply log transformation to Total Deaths</span></span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a>data[<span class="st">&#39;Total_Deaths_log&#39;</span>] <span class="op">=</span> np.log1p(data[<span class="st">&#39;Total Deaths&#39;</span>])  <span class="co"># log(1 + x) to handle zeros</span></span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Features and target</span></span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> data[<span class="st">&#39;CPI&#39;</span>].values.reshape(<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb27-18"><a href="#cb27-18" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> data[<span class="st">&#39;Total_Deaths_log&#39;</span>].values</span>
<span id="cb27-19"><a href="#cb27-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-20"><a href="#cb27-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Linear Regression</span></span>
<span id="cb27-21"><a href="#cb27-21" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> LinearRegression()</span>
<span id="cb27-22"><a href="#cb27-22" aria-hidden="true" tabindex="-1"></a>model.fit(X, y)</span>
<span id="cb27-23"><a href="#cb27-23" aria-hidden="true" tabindex="-1"></a>y_pred <span class="op">=</span> model.predict(X)</span>
<span id="cb27-24"><a href="#cb27-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-25"><a href="#cb27-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Evaluate the model</span></span>
<span id="cb27-26"><a href="#cb27-26" aria-hidden="true" tabindex="-1"></a>mse <span class="op">=</span> mean_squared_error(y, y_pred)</span>
<span id="cb27-27"><a href="#cb27-27" aria-hidden="true" tabindex="-1"></a>r2 <span class="op">=</span> r2_score(y, y_pred)</span>
<span id="cb27-28"><a href="#cb27-28" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f&quot;Linear Regression MSE: </span><span class="sc">{</span>mse<span class="sc">:.2f}</span><span class="ss">, R²: </span><span class="sc">{</span>r2<span class="sc">:.2f}</span><span class="ss">&quot;</span>)</span>
<span id="cb27-29"><a href="#cb27-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-30"><a href="#cb27-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualize the relationship</span></span>
<span id="cb27-31"><a href="#cb27-31" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">6</span>))</span>
<span id="cb27-32"><a href="#cb27-32" aria-hidden="true" tabindex="-1"></a>sns.scatterplot(x<span class="op">=</span>data[<span class="st">&#39;CPI&#39;</span>], y<span class="op">=</span>data[<span class="st">&#39;Total_Deaths_log&#39;</span>], label<span class="op">=</span><span class="st">&#39;Log(Actual Deaths)&#39;</span>, color<span class="op">=</span><span class="st">&#39;blue&#39;</span>)</span>
<span id="cb27-33"><a href="#cb27-33" aria-hidden="true" tabindex="-1"></a>plt.plot(data[<span class="st">&#39;CPI&#39;</span>], y_pred, color<span class="op">=</span><span class="st">&#39;red&#39;</span>, label<span class="op">=</span><span class="st">&#39;Regression Line&#39;</span>)</span>
<span id="cb27-34"><a href="#cb27-34" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&#39;Linear Regression: CPI vs. Log(Total Deaths)&#39;</span>)</span>
<span id="cb27-35"><a href="#cb27-35" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&#39;CPI&#39;</span>)</span>
<span id="cb27-36"><a href="#cb27-36" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&#39;Log(Total Deaths)&#39;</span>)</span>
<span id="cb27-37"><a href="#cb27-37" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb27-38"><a href="#cb27-38" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>)</span>
<span id="cb27-39"><a href="#cb27-39" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb27-40"><a href="#cb27-40" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;(Much Better!)&quot;</span>)</span></code></pre></div>
<div class="output stream stdout">
<pre><code>Linear Regression MSE: 2.50, R²: 0.05
</code></pre>
</div>
<div class="output display_data">
<p><img
src="vertopal_7478f51bb5654ca1890dd3e1edaa5c94/0bf543f4be2593b100c28e6bb858fc869686073a.png" /></p>
</div>
<div class="output stream stdout">
<pre><code>(Much Better!)
</code></pre>
</div>
</div>
<div class="cell markdown" id="ck3R6A-zWz5g">
<p>We can now see a clearer linear relationship within the data after
taking the natural log of deaths. What we find is that there is a slight
decrease in total deaths as the CPI increases according to the negative
slope of the line as per our machine learning model. While there isn't
an overwhelming strong linear relationship due to a bulk of the points
being in lower death counts, we get a valuable trend that increased CPI
allows for increased preparedness and can indirectly prepare and save
lives.</p>
<p>The regression line has a slight negative slope, suggesting that as
CPI increases, the log of total deaths tends to decrease marginally.
However, this relationship appears weak given the high scatter of
points. The scatterplot shows significant variability in the data. While
CPI increases along the x-axis, the log-transformed total deaths
(y-axis) are widely dispersed, indicating that CPI alone may not be a
strong predictor of total deaths. There are several dense clusters of
points across different CPI values, particularly in the lower to middle
ranges (e.g., CPI values around 20–60). These clusters might indicate
regional or temporal factors influencing disaster-related deaths. There
are a few points with very high log(total deaths) values (y-axis), which
may represent extreme events like large-scale disasters. These outliers
could skew the regression results and should be analyzed separately. The
fitted regression line does not appear to capture the variability in the
data effectively, suggesting a weak or insignificant linear relationship
between CPI and log(total deaths).</p>
<p>The weak relationship implies that factors other than CPI likely have
a stronger influence on disaster-related deaths. These could include the
type of disaster, regional preparedness, or socioeconomic factors beyond
inflation (e.g., GDP, healthcare access).</p>
</div>
<section id="conclusion" class="cell markdown" id="mhZiUSHqZhSI">
<h2>CONCLUSION</h2>
</section>
<div class="cell markdown" id="w4IUlswpZkuC">
<ol>
<li>The final conclusion from the linear regression analysis is that CPI
alone is not a strong predictor of total deaths from disasters, even
after applying a logarithmic transformation to stabilize variance. The
weak relationship between CPI and the log of total deaths, indicated by
the scattered data points and the almost flat regression line, suggests
that other factors likely play a more significant role in determining
disaster-related fatalities. CPI alone does not provide meaningful
insight into disaster fatalities, and future studies should incorporate
additional socioeconomic, geographical, and disaster-specific variables
for more accurate modeling and actionable insights. However from our
model we can still see a weak negative correlation through the
regression analysis which implies that increased CPI can lead to
decreased deaths, which makes sense as more development and
infrastructure play a role in injury prevention.</li>
</ol>
</div>
<section id="final-conclusion-and-additional-insights"
class="cell markdown" id="z9cmhPrVG8WK">
<h2>FINAL CONCLUSION and ADDITIONAL INSIGHTS</h2>
<p>Throughout this tutorial we not only went through various machine
learning techniques, exploratory analysis, as well as visualization
processes. Each of which helps build up the many pieces of information
that allows us to learn about how the many various disasters may affect
each location. It also allows us to take a look throughout time and how
we have adapted to each and every disaster to reduce damages and ensure
that it's safer.</p>
<p>One thing we learned throughout is that utilizing multiple factors
(like CPI and Geolocation) to try to predict things such as total
casualties is very difficult due to not only the plethora of additional
factors that may exist but also the variation of each factor itself.</p>
<p>One of the things that we were able to observe was the greater the
CPI allows for slightly lesser casualties due to a more likley readiness
for such conditions.</p>
<p>Another observation that we have made is that between decades there
has been a noticeable variation in death to casualties ratio which
allows us to conclude within each decade the natural severity of natural
disasters has changed throughout time.</p>
<p>Finally one of the other observations that we have learned from these
tests are floods commonly cause more damage than storms overall and in
order to maximize the efficiency of minimizing the damage from "water"
based disasters attempting to prepare for floods gives the greatest
result.</p>
<p>For those that are more experienced with machine learning we also use
slightly more advanced machine learning techniques such as KNN
regression which was not mentioned as much in class as well as reviewing
more simpler techniques like linear regression.</p>
</section>
<section id="more-information-about-data-science" class="cell markdown"
id="u7JpHtp5I-25">
<h3>More Information about Data Science</h3>
<p>Linear Regression: <a
href="https://www.geeksforgeeks.org/linear-regression-python-implementation/"
class="uri">https://www.geeksforgeeks.org/linear-regression-python-implementation/</a></p>
<p>ANOVA Test: <a href="https://www.reneshbedre.com/blog/anova.html"
class="uri">https://www.reneshbedre.com/blog/anova.html</a></p>
<p>KNN Regression: <a
href="https://www.geeksforgeeks.org/k-nearest-neighbors-knn-regression-with-scikit-learn/"
class="uri">https://www.geeksforgeeks.org/k-nearest-neighbors-knn-regression-with-scikit-learn/</a></p>
<p>Data Cleaning: <a
href="https://www.w3schools.com/python/pandas/pandas_cleaning.asp"
class="uri">https://www.w3schools.com/python/pandas/pandas_cleaning.asp</a></p>
</section>
</body>
</html>
